{"ast":null,"code":"var _jsxFileName = \"/home/gabriel/Escritorio/table_manager/src/App.js\",\n    _s = $RefreshSig$();\n\n/*\n\tImports:\n\t1. data : the dataset inside the .json file.\n\t2. useRef : management of the references within both headers and table content.\n*/\nimport data from './data.json';\nimport React, { useRef } from \"react\";\n/*\n\tDescription : Provides the dataset imported from the data.json file. \n  Output : Array of objects containing the .json file information, each\n           register contains a row of the deployed table.\n*/\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction getData() {\n  return data;\n}\n/*\n\tDescription : Loads the element containing all the table module.\n*/\n\n\nfunction App() {\n  _s();\n\n  /*\n    Initializes the dataset references:\n    + headersRef : Table headers reference.\n    + rowsRef : Table content reference.\n  */\n  const headersRef = useRef([]);\n  headersRef.current = [];\n  const rowsRef = useRef([]);\n  rowsRef.current = [];\n  /*\n    Initialize the information regarding both\n    the dataset in the view and the logic\n  */\n\n  var dataSet = getData();\n  var informationTable = [];\n  var infoRow = [];\n  dataSet.map(data => {\n    infoRow.push(data.region_name);\n    infoRow.push(data.region_alpha_code);\n    infoRow.push(data.value);\n    infoRow.push(data.ref_date);\n    informationTable.push(infoRow);\n    infoRow = [];\n  });\n  /*\n    References regarding the column re-ordering interaction:\n    + isReorderActive : Sets the columns reorder lifecycle.\n    + infoOrigin : Captures the origin column information.\n    + posOrigin : Captures the origin column position.\n    + infoDestiny : Captures the destiny column information.\n    + posDestiny : Captures the destiny column position.\n  */\n\n  var isReorderActive = false;\n  var infoOrigin = [];\n  var posOrigin;\n  var infoDestiny = [];\n  var posDestiny;\n  const HEADERSTEXT = [\"Region name\", \"Region alpha code\", \"Value\", \"Reference date\"];\n  /*const headerStyle = {\n    \"borderColor\": \"#3c3f51\",\n    \"backgroundColor\": \"#353849\",\n    \"color\": \"#9398b6\"\n  };*/\n\n  /*\n    Captures the dataset references whenever\n    the events are called\n  */\n\n  const addHeaderToRefs = el => {\n    if (el != null) {\n      headersRef.current.push(el);\n    }\n  };\n\n  const addRowToRefs = el => {\n    if (el != null) {\n      rowsRef.current.push(el);\n    }\n  };\n  /*\n    Renders the headers, including:\n    + Interactions.\n    + References.\n    + Visual elements.\n  */\n\n\n  const renderHeaders = () => {\n    var headers = [];\n    HEADERSTEXT.map((header, i) => {\n      // Adds the current element to the headers reference\n      headers.push( /*#__PURE__*/_jsxDEV(\"th\", {\n        ref: addHeaderToRefs,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\" //Adds both key and click handler (explanation further in this document)\n          ,\n          onKeyPress: event => keypressHandler(event, i),\n          defaultValue: header\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 22\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"#\",\n          onClick: event => handleReorderColumns(i),\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fa\",\n            children: \"\\uF021\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 26\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 22\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 22\n      }, this));\n      return headers;\n    });\n    return headers;\n  };\n  /*\n    Description: Whenever the Enter button is pressed, removes the focus\n                 of the element, in order to finish the column rename interaction. \n  */\n\n\n  const keypressHandler = (event, currentPos) => {\n    if (event.key === \"Enter\") {\n      headersRef.current[currentPos].childNodes[0].blur();\n    }\n  };\n  /*\n    Description: Handles the columns reorder according to its\n                 lifecycle current state.\n  */\n\n\n  const handleReorderColumns = currentPos => {\n    /*\n      The reorder follows this path:\n      1. Saves the columns position.\n      2. Reorder the columns (if the method is invoqued).\n      3. Styles the involved columns.\n      4. Updates the reorder lifecycle.\n    */\n    if (isReorderActive) {\n      posDestiny = currentPos;\n      reOrderColumns(posOrigin, posDestiny);\n      restoreSelectedStyle(posOrigin);\n      isReorderActive = false;\n    } else {\n      posOrigin = currentPos;\n      changeSelectedStyle(currentPos);\n      isReorderActive = true;\n    }\n  };\n  /*\n    Description: Reorders the selected columns.\n  */\n\n\n  function reOrderColumns(posOrigin, posDestiny) {\n    //Captures the columns' inner data\n    infoOrigin = getColumnInformation(posOrigin);\n    infoDestiny = getColumnInformation(posDestiny); //Switches the columns' data\n\n    for (var i = 0; i < informationTable.length; i++) {\n      rowsRef.current[i].cells[posOrigin].innerText = infoDestiny[i];\n      rowsRef.current[i].cells[posDestiny].innerText = infoOrigin[i];\n      informationTable[i][posOrigin] = infoDestiny[i];\n      informationTable[i][posDestiny] = infoOrigin[i];\n    } //Switches the headers text\n\n\n    const headerOrigin = headersRef.current[posOrigin].childNodes[0].value;\n    const headerDestiny = headersRef.current[posDestiny].childNodes[0].value;\n    headersRef.current[posOrigin].childNodes[0].value = headerDestiny;\n    headersRef.current[posDestiny].childNodes[0].value = headerOrigin;\n  }\n\n  ;\n  /*\n    Description: Styles the column regarding the reordering current state.\n  */\n\n  function changeSelectedStyle(selectedPos) {\n    headersRef.current[selectedPos].style.boxShadow = \"-2px -2px 7px -1px #888888\";\n    headersRef.current[selectedPos].style.filter = \"brightness(190%)\";\n\n    for (var i = 0; i < headersRef.current.length; i++) {\n      if (i !== selectedPos) {\n        headersRef.current[i].childNodes[1].style.filter = \"brightness(190%)\";\n        headersRef.current[i].childNodes[1].childNodes[0].style.fontSize = \"130%\";\n      }\n    }\n  }\n\n  function restoreSelectedStyle(selectedPos) {\n    headersRef.current[selectedPos].style.boxShadow = \"none\";\n    headersRef.current[selectedPos].style.filter = \"brightness(100%)\";\n\n    for (var i = 0; i < headersRef.current.length; i++) {\n      if (i !== selectedPos) {\n        headersRef.current[i].childNodes[1].style.filter = \"brightness(100%)\";\n        headersRef.current[i].childNodes[1].childNodes[0].style.fontSize = \"100%\";\n      }\n    }\n  }\n  /*\n    Description: Returns the column data according to the given position.\n  */\n\n\n  function getColumnInformation(selectedPos) {\n    var selectedInformation = [];\n\n    for (var i = 0; i < informationTable.length; i++) {\n      selectedInformation.push(informationTable[i][selectedPos]);\n    }\n\n    return selectedInformation;\n  }\n\n  ;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: /*#__PURE__*/_jsxDEV(\"table\", {\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: renderHeaders()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: dataSet.map((data, i) => {\n          return /*#__PURE__*/_jsxDEV(\"tr\", {\n            ref: addRowToRefs,\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: data.region_name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: data.region_alpha_code\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: data.value\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: data.ref_date\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 17\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 206,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"MI0cH6AenWuNbMCNSkqY64t9Kr8=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/home/gabriel/Escritorio/table_manager/src/App.js"],"names":["data","React","useRef","getData","App","headersRef","current","rowsRef","dataSet","informationTable","infoRow","map","push","region_name","region_alpha_code","value","ref_date","isReorderActive","infoOrigin","posOrigin","infoDestiny","posDestiny","HEADERSTEXT","addHeaderToRefs","el","addRowToRefs","renderHeaders","headers","header","i","event","keypressHandler","handleReorderColumns","currentPos","key","childNodes","blur","reOrderColumns","restoreSelectedStyle","changeSelectedStyle","getColumnInformation","length","cells","innerText","headerOrigin","headerDestiny","selectedPos","style","boxShadow","filter","fontSize","selectedInformation"],"mappings":"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","sourcesContent":["/*\n\tImports:\n\t1. data : the dataset inside the .json file.\n\t2. useRef : management of the references within both headers and table content.\n*/\nimport data from './data.json';\nimport React, {useRef} from \"react\";\n\n/*\n\tDescription : Provides the dataset imported from the data.json file. \n  Output : Array of objects containing the .json file information, each\n           register contains a row of the deployed table.\n*/\nfunction getData() {\n  return data;\n}\n\n/*\n\tDescription : Loads the element containing all the table module.\n*/\nfunction App() {\n  /*\n    Initializes the dataset references:\n    + headersRef : Table headers reference.\n    + rowsRef : Table content reference.\n  */ \n  const headersRef = useRef([]); \n  headersRef.current = []; \n  const rowsRef = useRef([]);\n  rowsRef.current = [];\n\n  /*\n    Initialize the information regarding both\n    the dataset in the view and the logic\n  */ \n  var dataSet = getData();\n  var informationTable = [];\n  var infoRow = []; \n\n  dataSet.map((data) => {\n    infoRow.push(data.region_name);\n    infoRow.push(data.region_alpha_code);\n    infoRow.push(data.value);\n    infoRow.push(data.ref_date);\n    informationTable.push(infoRow);\n    infoRow = []; \n  });\n \n  /*\n    References regarding the column re-ordering interaction:\n    + isReorderActive : Sets the columns reorder lifecycle.\n    + infoOrigin : Captures the origin column information.\n    + posOrigin : Captures the origin column position.\n    + infoDestiny : Captures the destiny column information.\n    + posDestiny : Captures the destiny column position.\n  */\n  var isReorderActive = false;\n  var infoOrigin = [];\n  var posOrigin; \n  var infoDestiny = [];\n  var posDestiny;\n\n\n  const HEADERSTEXT = [\"Region name\",\n                       \"Region alpha code\",\n                       \"Value\",\n                       \"Reference date\"];\n\n  /*const headerStyle = {\n    \"borderColor\": \"#3c3f51\",\n    \"backgroundColor\": \"#353849\",\n    \"color\": \"#9398b6\"\n  };*/\n\n  /*\n    Captures the dataset references whenever\n    the events are called\n  */\n  const addHeaderToRefs = (el) =>{\n    if(el!=null){\n      headersRef.current.push(el);\n    }\n  };\n  const addRowToRefs = (el) =>{\n    if(el!=null){\n      rowsRef.current.push(el);\n    }\n  };\n    \n  /*\n    Renders the headers, including:\n    + Interactions.\n    + References.\n    + Visual elements.\n  */\n  const renderHeaders = () => {\n    var headers = [];\n    HEADERSTEXT.map((header,i) => {\n                     // Adds the current element to the headers reference\n        headers.push(<th ref={addHeaderToRefs}>\n                     <input type=\"text\"  \n                        //Adds both key and click handler (explanation further in this document)\n                        onKeyPress={event => keypressHandler(event,i)} \n                        defaultValue={header}/>   \n                     <a href=\"#\" onClick={event => handleReorderColumns(i)}>\n                         <i className=\"fa\">&#xf021;</i></a> \n                     </th>);\n        return headers; \n    }); \n    return headers;\n  }\n\n  /*\n    Description: Whenever the Enter button is pressed, removes the focus\n                 of the element, in order to finish the column rename interaction. \n  */\n  const keypressHandler = (event,currentPos) => {\n    if (event.key === \"Enter\") {\n        headersRef.current[currentPos].childNodes[0].blur();\n    }\n  };\n\n  /*\n    Description: Handles the columns reorder according to its\n                 lifecycle current state.\n  */\n  const handleReorderColumns = (currentPos) => {\n    /*\n      The reorder follows this path:\n      1. Saves the columns position.\n      2. Reorder the columns (if the method is invoqued).\n      3. Styles the involved columns.\n      4. Updates the reorder lifecycle.\n    */\n    if(isReorderActive){\n      posDestiny = currentPos;\n      reOrderColumns(posOrigin,posDestiny);\n      restoreSelectedStyle(posOrigin);\n      isReorderActive = false; \n    }else{\n      posOrigin = currentPos;\n      changeSelectedStyle(currentPos);\n      isReorderActive = true; \n    }\n  }\n\n  /*\n    Description: Reorders the selected columns.\n  */\n  function reOrderColumns(posOrigin,posDestiny){\n    //Captures the columns' inner data\n    infoOrigin = getColumnInformation(posOrigin);\n    infoDestiny = getColumnInformation(posDestiny);\n    //Switches the columns' data\n    for(var i = 0; i < informationTable.length; i++){\n      rowsRef.current[i].cells[posOrigin].innerText = infoDestiny[i];\n      rowsRef.current[i].cells[posDestiny].innerText = infoOrigin[i];\n      informationTable[i][posOrigin] = infoDestiny[i];\n      informationTable[i][posDestiny] = infoOrigin[i];\n    }\n    //Switches the headers text\n    const headerOrigin = headersRef.current[posOrigin].childNodes[0].value;\n    const headerDestiny = headersRef.current[posDestiny].childNodes[0].value;\n    headersRef.current[posOrigin].childNodes[0].value = headerDestiny;\n    headersRef.current[posDestiny].childNodes[0].value = headerOrigin;\n  };\n\n  /*\n    Description: Styles the column regarding the reordering current state.\n  */\n  function changeSelectedStyle(selectedPos){\n    headersRef.current[selectedPos].style.boxShadow = \"-2px -2px 7px -1px #888888\";\n    headersRef.current[selectedPos].style.filter = \"brightness(190%)\";\n\n    for(var i = 0; i < headersRef.current.length; i++){\n      if(i!==selectedPos){\n        headersRef.current[i].childNodes[1].style.filter = \"brightness(190%)\";\n        headersRef.current[i].childNodes[1].childNodes[0].style.fontSize = \"130%\";\n      }\n    }\n  }\n  function restoreSelectedStyle(selectedPos){\n    headersRef.current[selectedPos].style.boxShadow = \"none\";\n    headersRef.current[selectedPos].style.filter = \"brightness(100%)\";\n\n    for(var i = 0; i < headersRef.current.length; i++){\n      if(i!==selectedPos){\n        headersRef.current[i].childNodes[1].style.filter = \"brightness(100%)\";\n        headersRef.current[i].childNodes[1].childNodes[0].style.fontSize = \"100%\";\n      }\n    }\n  }\n  \n  /*\n    Description: Returns the column data according to the given position.\n  */\n  function getColumnInformation(selectedPos){\n    var selectedInformation = [];\n    for(var i = 0; i < informationTable.length; i++){\n      selectedInformation.push(informationTable[i][selectedPos]);\n    }\n    return selectedInformation;\n  };\n\n  return (\n    <div className=\"App\">\n      <table>\n        <thead>\n          <tr>\n              {renderHeaders()}\n          </tr>\n        </thead>\n        <tbody>\n          { dataSet.map((data, i) => {\n            return (\n                <tr ref={addRowToRefs}>\n                <td>{data.region_name}</td>\n                <td>{data.region_alpha_code}</td>\n                <td>{data.value}</td>\n                <td>{data.ref_date}</td>\n                </tr>\n            )\n          })}\n        </tbody>\n      </table>  \n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}